{{- define "patchType" -}}

{{if .Patch.Generate}}

// {{.Patch.Name}} can (partially) patch a {{.PackagePrefix}}{{.Type}}.
type {{.Patch.Name}} struct {
{{- range .Patch.Fields true }}
	{{.Name}}	{{.Type}}	`db:"{{.Column}}"`
{{- end}}
}

{{ end }}

{{- end -}}

// Code generated by endogen; DO NOT EDIT.

package {{.Package}}

import (
	{{ range .Imports -}}
	{{.Spec}}
	{{end}})

{{range .Models}}

{{if not (or .ReadOnly .Immutable)}}
{{template "patchType" .}}
{{end}}

{{end}}
